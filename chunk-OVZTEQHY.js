import{a as _i}from"./chunk-JJ6SWRGN.js";import{a as di,b as ui,c as ci,d as pi,f as fi,g as hi}from"./chunk-4YY4KW3D.js";import"./chunk-HKGVSL7P.js";import{a as ri}from"./chunk-TEDVKY3J.js";import{a as Ht}from"./chunk-K6GBJGWM.js";import{a as si,j as Gt,k as lt,l as li,m as mi}from"./chunk-I35Y2QOD.js";import"./chunk-FZVJKCT4.js";import{a as y}from"./chunk-2UUWE3MU.js";import{$a as d,$d as O,$e as Vt,$f as oi,Ab as Ce,Ac as pt,Bb as ge,Bc as Y,Bf as it,Cb as nt,Cc as Se,Cf as gt,De as Ve,Eb as xe,Fb as v,Fc as At,Ff as Ye,G as q,Gb as X,Ha as Yt,Hb as j,Ia as c,Ie as Re,Ja as p,Je as ze,Jf as Ke,La as Tt,Le as He,Ma as F,Mb as k,Me as Ge,Na as L,Nb as $,Nf as We,O as ae,Oa as _,Of as Ze,Pa as r,Pb as De,Pd as Pe,Qa as a,Qb as U,Ra as C,Re as Lt,S as Q,Sa as le,Sf as ti,Ta as me,Te as Nt,Ua as wt,Ue as qe,V as It,Vd as ke,Ve as $t,W as u,Wd as Ue,We as Bt,Wf as xt,X as w,Xd as Ae,Xf as ei,Y as P,Ya as N,Yd as Oe,Ye as jt,Yf as ii,Za as Pt,Zd as Fe,_a as I,_d as Le,_e as Qe,_f as ni,a as St,ae as B,b as Wt,be as Ot,bf as ht,bg as z,ca as f,ce as Ft,cg as ai,db as de,de as M,dg as Rt,eb as ue,f as Xt,fb as ce,he as Ne,ib as Kt,ic as J,if as K,j as Zt,jf as W,kb as kt,kc as ve,kd as Ie,kf as _t,la as dt,lb as Et,le as $e,lf as Z,ma as rt,mb as s,mf as st,n as te,na as re,nb as x,nc as Ee,nf as Ct,ng as zt,ob as D,oc as Me,oe as Be,of as tt,p as ee,pa as l,pb as ut,pc as be,q as Jt,qc as ye,qd as Te,rc as V,rd as we,rf as Xe,s as G,sd as ft,se as je,sf as et,t as ie,ta as se,vb as pe,vc as Ut,wb as fe,wd as A,xa as g,xb as he,xc as R,y as ne,yc as ct,yd as E,yf as Je,z as oe,zb as _e}from"./chunk-B4G34RIT.js";var Ci="edit_mode",Dt=(()=>{let e=class e{constructor(){this.auth=u(ri),this.tenant=u(Ht),this.editMode=f(!1),$(()=>{sessionStorage.setItem(Ci,JSON.stringify(this.editMode()))});let i=JSON.parse(sessionStorage.getItem(Ci)||"false");this.editMode.set(!!i),M([this.auth.profile],([n])=>{n||this.editMode.set(!1)})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vt=(()=>{let e=class e{constructor(){this.http=u(V),this.API=`${y.apiUrl}/app/courses`,this.refresh_=new Zt(1),this.refresh$=this.refresh_.asObservable()}refresh(){this.refresh_.next(this.refresh_.value+1)}getItem(i){return ie([this.http.get(`${this.API}/${i}`),this.http.get(`${this.API}/${i}/usage`)]).pipe(G(([n,m])=>{var h=this.parseCourse(n);if(m?.length)for(let H of n.chapters??[])for(let b of H.units??[]){let at=m.find(bt=>bt.unitID==b.id);at&&(b.isCompleted=at.isCompleted,b.examScore=at.examScore)}return h}))}getVideoPlayerInfo(i,n){return this.http.get(`${y.apiUrl}/app/videos/${i}/player-info?c=${n}`)}parseCourse(i){i.canView=i.canView||!0,i.settings=i.settings||{};for(let n of i.chapters??[])for(let m of n.units??[])m.articleUrl?.length&&(m.articleUrl=y.filesUrl+m.articleUrl,m.gameUrl=y.filesUrl+m.gameUrl);return i}toggleSync(i){return this.http.post(`${this.API}/toggle-sync/${i}`,{})}toggleCompleted(i,n){return this.http.post(`${this.API}/toggle-completed/${i}?auto=${n}`,void 0)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ot=(()=>{let e=class e{refresh(){this._refresh.update(i=>i+1)}setCourseID(i){this._courseID.set(i)}constructor(i,n,m){this.courses=u(vt),this._refresh=f(1),this._courseID=f(0),this.courseID=this._courseID.asReadonly(),this._loading=f(!0),this.loading=this._loading.asReadonly(),this._error=f(null),this.error=this._error.asReadonly(),this.course=f(void 0),$(()=>{this.error()?.length&&i.error({title:"\u05E9\u05D2\u05D9\u05D0\u05D4",msg:this.error(),btn:"\u05E1\u05D2\u05D5\u05E8",duration:1e4})}),M([this._courseID,this._refresh],([h,H])=>{if(!h){this.course.set(void 0);return}this._loading.set(!0),this._error.set(null),this.courses.getItem(h).pipe(q(()=>this._loading.set(!1))).subscribe({next:b=>this.course.set(b),error:b=>(b.includes("404")?m.navigate(["../404"],{relativeTo:n,skipLocationChange:!0}):this._error.set(b),te),complete:()=>this._loading.set(!1)})})}};e.\u0275fac=function(n){return new(n||e)(It(it),It(R),It(pt))},e.\u0275prov=Q({token:e,factory:e.\u0275fac});let t=e;return t})();var xi=(()=>{let e=class e{constructor(){this.item=U.required(),this.s=k(()=>this.item().settings),this.hero=k(()=>{if(this.s()?.hero)return y.filesUrl+this.s().hero}),this.canView=k(()=>this.item().canView)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["course-box"]],inputs:{item:[1,"item"]},decls:3,vars:1,consts:[[1,"meta"],[1,"pic"],["alt","",1,"img-fluid",3,"src"]],template:function(n,m){n&1&&(le(0,"div",0)(1,"div",1),wt(2,"img",2),me()()),n&2&&(l(2),Pt("src",m.hero()||"/d/course-hero.png",rt))},dependencies:[J],styles:[".meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;background-color:#fff;border-radius:10px;box-shadow:2px 10px 30.7px 5px #0000001a}.meta[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]{position:relative;z-index:1;width:100%}.meta[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;background:linear-gradient(180deg,#0000 66%,#000c),#d3d3d3 50%/cover no-repeat}.meta[_ngcontent-%COMP%]   .pic[_ngcontent-%COMP%]   .creator[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;z-index:5;color:#fff}.meta[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{text-align:center;padding:0 20px 20px}.meta[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{line-height:2.25rem;border-radius:100px}"]});let t=e;return t})();var Di=(t,e)=>e.id;function zi(t,e){t&1&&(r(0,"mat-icon",5),s(1,"check_circle"),a())}function Hi(t,e){if(t&1){let o=N();r(0,"mat-list-item")(1,"mat-icon",2),s(2),a(),r(3,"button",3),I("click",function(){let n=w(o).$implicit,m=d().$implicit,h=d();return P(h.navigateToUnit(m.id,n.id))}),r(4,"span"),s(5),a()(),r(6,"div",4),c(7,zi,2,0,"mat-icon",5),a()()}if(t&2){let o=e.$implicit,i=d(2);Yt("aria-label","\u05D9\u05D7\u05D9\u05D3\u05D4: "+o.title),l(2),x(i.contentTypeIcon(o.typeID)),l(),_("disabled",!(i.item().canView||!0)),Yt("aria-label","\u05E4\u05EA\u05D7 \u05D9\u05D7\u05D9\u05D3\u05D4: "+o.title),l(),kt("text-line-through",i.editMode()&&!o.statusID),l(),x(o.title),l(2),p(o.isCompleted?7:-1)}}function Gi(t,e){t&1&&C(0,"mat-divider")}function qi(t,e){if(t&1&&(r(0,"div",1)(1,"h3"),s(2),r(3,"small"),s(4),a()()(),F(5,Hi,8,8,"mat-list-item",null,Di),c(7,Gi,1,0,"mat-divider")),t&2){let o=e.$implicit,i=e.$index,n=e.$count;l(2),D(" ",o.name," "),l(2),D("",o.units==null?null:o.units.length," \u05D9\u05D7\u05D9\u05D3\u05D5\u05EA"),l(),L(o.units),l(2),p(i!==n-1?7:-1)}}var vi=(()=>{let e=class e{constructor(){this.item=U.required(),this.appService=u(Dt),this.snackbar=u(it),this.router=u(pt),this.route=u(R),this.editMode=this.appService.editMode,this.error=f(null),this.contentTypeIcon=Rt,$(()=>{this.error()?.length&&this.snackbar.error({title:"\u05E9\u05D2\u05D9\u05D0\u05D4",msg:this.error(),btn:"\u05E1\u05D2\u05D5\u05E8",duration:1e4})})}navigateToUnit(i,n){this.item().canView,this.router.navigate(["./",i,n],{relativeTo:this.route})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["syllabus"]],inputs:{item:[1,"item"]},decls:5,vars:0,consts:[["role","list","aria-label","\u05EA\u05D5\u05DB\u05DF \u05D4\u05E7\u05D5\u05E8\u05E1"],["mat-subheader","",1,"chapter"],["matListItemIcon","",1,"unit-icon"],["matListItemTitle","","type","button",1,"btn-simple",3,"click","disabled"],["matListItemMeta",""],["matTooltip","\u05E1\u05D5\u05DE\u05DF \u05DB\u05D4\u05D5\u05E9\u05DC\u05DD",1,"completed-icon","text-success"]],template:function(n,m){n&1&&(r(0,"h2"),s(1,"\u05EA\u05D5\u05DB\u05DF \u05D4\u05E7\u05D5\u05E8\u05E1"),a(),r(2,"mat-nav-list",0),F(3,qi,8,3,null,null,Di),a()),n&2&&(l(3),L(m.item().chapters))},dependencies:[At,ht,Vt,jt,Bt,Qe,Lt,Nt,$t,E,B,O,Ft,Ot],styles:["h2[_ngcontent-%COMP%]{font-weight:400;font-size:1.1rem}h3[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:flex-start;font-size:1rem}h3[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-weight:400}a[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer!important}.unit-icon[_ngcontent-%COMP%]{margin-left:.5rem!important;color:#bbb!important}[_nghost-%COMP%]     .mat-mdc-list-item:focus, [_nghost-%COMP%]     .mat-mdc-list-item:focus-visible{outline:3px solid #005fcc!important;outline-offset:2px!important;background-color:#005fcc1a!important;border-radius:6px!important}[_nghost-%COMP%]     .mat-mdc-list-item:focus:not(:focus-visible){outline:none!important;background-color:transparent!important}[_nghost-%COMP%]     .mat-mdc-list-item:focus .btn-simple, [_nghost-%COMP%]     .mat-mdc-list-item:focus-visible .btn-simple{background-color:transparent!important;color:inherit!important}.btn-simple[_ngcontent-%COMP%]{background:none!important;border:none!important;padding:4px 8px!important;margin:0!important;font:inherit!important;color:inherit!important;text-decoration:none!important;cursor:pointer!important;display:inline!important;text-align:inherit!important}.btn-simple[_ngcontent-%COMP%]:focus, .btn-simple[_ngcontent-%COMP%]:focus-visible{outline:2px solid #ff5722!important;outline-offset:1px!important;background-color:#ff57221a!important;border-radius:3px!important}.btn-simple[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important;background-color:transparent!important}.btn-simple[_ngcontent-%COMP%]:disabled{opacity:.6!important;cursor:not-allowed!important}"]});let t=e;return t})();function Qi(t,e){if(t&1&&(r(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title-group")(3,"mat-card-title"),s(4),a(),r(5,"mat-card-subtitle"),s(6),r(7,"div"),s(8),a(),r(9,"p",1),s(10),a()(),C(11,"course-box",2),a()(),r(12,"mat-card-content"),C(13,"syllabus",3),a()()),t&2){let o=e,i=d();l(4),x(o.name),l(2),ut(" ",o.schoolName," | ",o.className," "),l(2),x(i.gendersTrans(o.genderID)),l(2),x(o.desc),l(),_("item",o),l(2),_("item",o)}}var Ei=(()=>{let e=class e{constructor(){this.service=u(ot),this.appService=u(Dt),this.route=u(R),this.viewportScroller=u(ve),this.title=u(Ut),this.course=this.service.course,this.pageTitle=this.route.snapshot.title||"",this.myRoute="courses/"+this.route.snapshot.url.join("/"),this.editMode=this.appService.editMode,this.gendersTrans=Gt,this.title.setTitle(this.pageTitle),M([this.service.course],([i])=>{i&&this.title.setTitle(i.name)})}goto(){this.viewportScroller.scrollToAnchor("syllabus")}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[["appearance","outlined"],[1,"summary"],["mat-card-xl-image","",3,"item"],[3,"item"]],template:function(n,m){if(n&1&&c(0,Qi,14,7,"mat-card",0),n&2){let h;p((h=m.course())?0:-1,h)}},dependencies:[J,et,K,Z,tt,st,W,_t,Xe,E,vi,xi],styles:["[_nghost-%COMP%]{display:block;padding:1rem;max-width:1080px;margin:0 auto;height:100%}mat-card-header[_ngcontent-%COMP%]{min-height:150px}mat-card-title-group[_ngcontent-%COMP%]{height:100%}"]});let t=e;return t})();function Xi(t,e){t&1&&C(0,"shared-loading",0)}function Ji(t,e){t&1&&C(0,"router-outlet")}var Mi=(()=>{let e=class e{constructor(i){this.service=u(ot),this.loading=this.service.loading,$(()=>{console.debug("course-loader",{courseID:this.service.courseID()})}),i.params.pipe(ft(),G(n=>+n.id),ne(n=>!!n)).subscribe(n=>this.service.setCourseID(+n))}};e.\u0275fac=function(n){return new(n||e)(se(R))},e.\u0275cmp=g({type:e,selectors:[["ng-component"]],features:[Ce([ot])],decls:2,vars:1,consts:[["caption","\u05D8\u05D5\u05E2\u05DF \u05E7\u05D5\u05E8\u05E1..."]],template:function(n,m){n&1&&c(0,Xi,1,0,"shared-loading",0)(1,Ji,1,0,"router-outlet"),n&2&&p(m.loading()?0:1)},dependencies:[ct,gt],encapsulation:2});let t=e;return t})();var Yi=t=>["/learn/courses/",t],Ki=()=>({exact:!0}),Wi=(t,e,o)=>["/learn/courses/",t,e,o],bi=(t,e)=>e.id;function Zi(t,e){t&1&&(r(0,"mat-icon",10),s(1,"check_circle"),a())}function tn(t,e){if(t&1&&(r(0,"a",8,0)(2,"mat-icon",2),s(3),a(),r(4,"span"),s(5),a(),r(6,"div",9),c(7,Zi,2,0,"mat-icon",10),a()()),t&2){let o=e.$implicit,i=Kt(1),n=d().$implicit;d();let m=he(0),h=d();_("routerLink",xe(6,Wi,m.id,n.id,o.id))("routerLinkActive","selected-item")("activated",i.isActive),l(3),x(h.contentTypeIcon(o.typeID)),l(2),x(o.title),l(2),p(o.isCompleted?7:-1)}}function en(t,e){t&1&&C(0,"mat-divider")}function nn(t,e){if(t&1&&(r(0,"a",5)(1,"span",4),s(2),a(),r(3,"small",6),s(4),a()(),r(5,"div",7),F(6,tn,8,10,"a",8,bi),a(),c(8,en,1,0,"mat-divider")),t&2){let o=e.$implicit,i=e.$index,n=e.$count;l(2),x(o.name),l(2),D("",o.units==null?null:o.units.length," \u05D9\u05D7\u05D9\u05D3\u05D5\u05EA"),l(2),L(o.units),l(2),p(i!==n-1?8:-1)}}function on(t,e){if(t&1&&(pe(0),r(1,"mat-nav-list")(2,"a",1)(3,"mat-icon",2),s(4,"arrow_forward"),a(),s(5," \u05D7\u05D6\u05E8\u05D4 \u05DC\u05E8\u05E9\u05D9\u05DE\u05EA \u05D4\u05E7\u05D5\u05E8\u05E1\u05D9\u05DD "),a(),C(6,"mat-divider"),r(7,"a",3,0)(9,"span",4),s(10),a()(),F(11,nn,9,3,null,null,bi),a()),t&2){let o=Kt(8),i=fe(d().course());l(7),_("routerLink",nt(6,Yi,i.id))("routerLinkActive","selected-item")("routerLinkActiveOptions",ge(8,Ki))("activated",o.isActive),l(3),x(i.name),l(),L(i.chapters)}}var yi=(()=>{let e=class e{constructor(){this.layoutService=u(ot),this.tenantService=u(Ht),this.courseID=this.layoutService.courseID,this.course=this.layoutService.course,this.courseLoading=this.layoutService.loading,this.courseError=this.layoutService.error,this.contentTypes=ai(this.tenantService.tenant()?.settings?.modules,!0),this.contentTypeIcon=Rt}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[["rla","routerLinkActive"],["mat-list-item","","routerLink","/learn",1,"menu-item","back"],["matListItemIcon",""],["mat-list-item","",1,"menu-item",3,"routerLink","routerLinkActive","routerLinkActiveOptions","activated"],["matListItemTitle",""],["mat-list-item","",1,"menu-item"],["matListItemLine",""],[2,"padding-right","10px"],["mat-list-item","",1,"menu-item",3,"routerLink","routerLinkActive","activated"],["matListItemMeta",""],["matTooltip","\u05E1\u05D5\u05DE\u05DF \u05DB\u05D4\u05D5\u05E9\u05DC\u05DD",1,"completed-icon","text-success"]],template:function(n,m){n&1&&c(0,on,13,9,"mat-nav-list"),n&2&&p(m.course()?0:-1)},dependencies:[J,At,Y,Se,E,B,O,ht,Vt,jt,Bt,Lt,qe,Nt,$t,Ft,Ot],styles:["[_nghost-%COMP%]{transition:all .3s ease-in-out}.menu-item[_ngcontent-%COMP%]{border-right:5px solid transparent;border-radius:0!important}.selected-item[_ngcontent-%COMP%]{border-right:5px solid var(--text-primary);background:#0000001a!important}.sub-menu[_ngcontent-%COMP%]{overflow:hidden;color:#f5e9b4}mat-icon[_ngcontent-%COMP%]{margin-left:12px!important}.section[_ngcontent-%COMP%]{color:var(--text-primary);font-size:.9rem;margin:10px 0 0;padding-right:20px}  .mat-mdc-list-item.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:42px}div[matListItemMeta][_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;gap:4px}div[matListItemMeta][_ngcontent-%COMP%]   .completed-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;margin:0!important}"]});let t=e;return t})();function an(t,e){if(t&1&&(r(0,"strong"),s(1),v(2,"trans"),a(),C(3,"div",2)),t&2){let o=d(2);l(),x(o.item().title||X(2,2,"noTitle")),l(2),_("innerHTML",o.item().text,dt)}}function rn(t,e){if(t&1&&(r(0,"span"),s(1),a()),t&2){let o=d(2);l(),x(o.item().fileName)}}function sn(t,e){if(t&1&&(r(0,"a",0)(1,"button",1)(2,"mat-icon"),s(3,"download"),a(),c(4,an,4,4),c(5,rn,2,1,"span"),a()()),t&2){let o=d();_("href",o.fullUrl(),rt),l(4),p(o.item().id?4:-1),l(),p(o.item().id?-1:5)}}function ln(t,e){if(t&1&&(r(0,"mat-icon",3),s(1),v(2,"matThumb"),a(),r(3,"strong"),s(4),v(5,"trans"),a()),t&2){let o,i=d();l(),x(X(2,2,(o=i.item())==null?null:o.title)),l(3),x(i.item().title||X(5,4,"noTitle"))}}var Si=(()=>{let e=class e{constructor(){this.unit=U.required(),this.item=U.required(),this.service=u(oi),this.fullUrl=k(()=>{if(this.item()?.url)return this.service.settings.filesUrl+this.item().url})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["att-item"]],inputs:{unit:[1,"unit"],item:[1,"item"]},decls:2,vars:1,consts:[["target","_blank",3,"href"],["mat-button",""],[1,"open-text",3,"innerHTML"],[1,"text-muted"]],template:function(n,m){if(n&1&&c(0,sn,6,3,"a",0)(1,ln,6,6),n&2){let h;p((h=m.item().url)!=null&&h.length?0:1)}},dependencies:[O,E,A,zt,ei],styles:["[_nghost-%COMP%]{display:flex;gap:15px;align-items:center}.progress[_ngcontent-%COMP%]{min-width:120px}"]});let t=e;return t})();var mn=(t,e)=>e.fileName;function dn(t,e){if(t&1&&C(0,"att-item",1),t&2){let o=e.$implicit,i=d(2);_("unit",i.unit())("item",o)}}function un(t,e){if(t&1&&F(0,dn,1,2,"att-item",1,mn),t&2){let o=d();L(o.unit().atts)}}function cn(t,e){t&1&&(r(0,"div",0),s(1,"\u05D8\u05E8\u05DD \u05D4\u05D5\u05E2\u05DC\u05D5 \u05E6\u05E8\u05D5\u05E4\u05D5\u05EA"),a())}var Ii=(()=>{let e=class e{constructor(){this.unit=U.required()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["atts"]],inputs:{unit:[1,"unit"]},decls:2,vars:1,consts:[[1,"alert","alert-warning"],[3,"unit","item"]],template:function(n,m){if(n&1&&c(0,un,2,0)(1,cn,2,0,"div",0),n&2){let h;p((h=m.unit().atts)!=null&&h.length?0:1)}},dependencies:[Si],encapsulation:2});let t=e;return t})();var pn=(t,e)=>e.id;function fn(t,e){t&1&&C(0,"shared-loading")}function hn(t,e){if(t&1){let o=N();r(0,"button",2),I("click",function(){w(o);let n=d(2);return P(n.startExam())}),s(1,` \u05D4\u05EA\u05D7\u05DC \u05D1\u05D7\u05D9\u05E0\u05D4
`),a()}}function _n(t,e){t&1&&(r(0,"div",1),s(1,"\u05DC\u05D0 \u05E0\u05D9\u05EA\u05DF \u05DC\u05DE\u05DC\u05D0 \u05D9\u05D5\u05EA\u05E8"),a())}function Cn(t,e){if(t&1&&(r(0,"tr")(1,"td"),s(2),v(3,"dateLocal"),r(4,"small"),s(5),v(6,"dateLocal"),a()(),r(7,"td"),s(8),a(),r(9,"td"),s(10),a()()),t&2){let o=e.$implicit;l(2),D("",j(3,4,o.created,"date")," "),l(3),x(j(6,7,o.created,"time")),l(3),x(o.finalScore),l(2),x(o.finalScore>=o.passScore?"\u05E2\u05D1\u05E8":"\u05DC\u05D0 \u05E2\u05D1\u05E8")}}function gn(t,e){if(t&1&&(C(0,"hr"),r(1,"h4"),s(2,"\u05DE\u05E2\u05E0\u05D9\u05DD \u05E7\u05D5\u05D3\u05DE\u05D9\u05DD"),a(),r(3,"table",3)(4,"thead")(5,"tr")(6,"th"),s(7,"\u05DE\u05D5\u05E2\u05D3"),a(),r(8,"th"),s(9,"\u05E6\u05D9\u05D5\u05DF \u05E1\u05D5\u05E4\u05D9"),a(),r(10,"th"),s(11,"\u05E2\u05D1\u05E8?"),a()()(),r(12,"tbody"),F(13,Cn,11,10,"tr",null,pn),a()()),t&2){let o=d(2);l(13),L(o.prevUserExams())}}function xn(t,e){if(t&1&&(c(0,hn,2,0,"button",0)(1,_n,2,0,"div",1),c(2,gn,15,0)),t&2){let o=d();p(o.canStart()?0:1),l(2),p(o.prevUserExams()?2:-1)}}var Ti=(()=>{let e=class e{constructor(){this.unit=U.required(),this.examService=u(_i),this.prevUserExams=f([]),this.retakes=f(1),this.loading=f(!0),this.canStart=k(()=>!this.retakes()||this.retakes()>this.prevUserExams().length),this.router=u(pt),M([this.unit],([i])=>{i&&this.unit().refID&&this.examService.getUserExams(this.unit().refID).pipe(q(()=>this.loading.set(!1))).subscribe(n=>{this.prevUserExams.set(n.prevs),this.retakes.set(n.retakes)})})}startExam(){this.examService.startExamByUnit(this.unit().id).subscribe(i=>this.router.navigate(["/learn/exam",i.session],{queryParams:{returnUrl:window.location.pathname}}))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["exam"]],inputs:{unit:[1,"unit"]},decls:2,vars:1,consts:[["mat-flat-button",""],[1,"text-danger"],["mat-flat-button","",3,"click"],[1,"data-table"]],template:function(n,m){n&1&&c(0,fn,1,0,"shared-loading")(1,xn,3,2),n&2&&p(m.loading()?0:1)},dependencies:[E,A,B,gt,xt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}"]});let t=e;return t})();var wi=`${y.apiUrl}/app/games`,Pi=(()=>{let e=class e{constructor(){this.http=u(V)}startGameByUnit(i){return this.http.get(`${wi}/${i}/start`)}endGame(i,n){return this.http.post(`${wi}/${i}/end`,n)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Dn(t,e){if(t&1&&(wt(0,"iframe",0),v(1,"safe")),t&2){let o=d();Pt("src",j(1,1,o.src(),"resourceUrl"),re)}}var ki=(()=>{let e=class e{constructor(){this.unitID=U.required({alias:"unit"}),this.url=U.required(),this.coursesService=u(vt),this.service=u(Pi),this.src=f(""),this.session=f(void 0),M([this.url],([i])=>{if(!i){this.src.set("");return}this.src.set(y.filesUrl+i)}),window.addEventListener(">>>> [game]",console.warn),window.addEventListener("message",i=>{if(i.data.action){let n=i.data.data;switch(i.data.action){case"playStart":console.warn(">>>> [game] playStart"),this.service.startGameByUnit(this.unitID()).subscribe(m=>{this.session.set(m.session)});break;case"playEnd":console.warn(">>>> [game] playEnd",this.session(),n.total),this.service.endGame(this.session(),+n.total).subscribe(m=>{});break;default:console.warn(`>>>> [game] ${i.data.action}`,i.data.data)}}},!1)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["game"]],inputs:{unitID:[1,"unit","unitID"],url:[1,"url"]},decls:1,vars:1,consts:[["id","gameFrame","height","100%","allowfullscreen","allowfullscreen",3,"src"]],template:function(n,m){n&1&&c(0,Dn,2,4,"iframe",0),n&2&&p(m.src().length?0:-1)},dependencies:[ii],styles:["[_nghost-%COMP%]{display:block;height:100%;position:relative}#gameFrame[_ngcontent-%COMP%]{position:absolute;margin:0;padding:0;width:100%;height:100%;border:none}"]});let t=e;return t})();var Ui=t=>["../",t];function vn(t,e){t&1&&C(0,"shared-loading")}function En(t,e){if(t&1&&(r(0,"mat-card-subtitle"),s(1),a()),t&2){let o=d();l(),D(" ",o.author," ")}}function Mn(t,e){if(t&1){let o=N();r(0,"button",15),I("click",function(){w(o);let n=d(4);return P(n.scrollToAttachments())}),r(1,"mat-icon"),s(2,"arrow_downward"),a(),s(3),v(4,"trans"),a()}if(t&2){let o=d();Et(o.atts!=null&&o.atts.length?"text-success":"text-secondary"),l(3),ut(" ",o.atts.length," ",X(4,4,"unitAttsTitle")," ")}}function bn(t,e){t&1&&C(0,"mat-spinner",17)}function yn(t,e){t&1&&(r(0,"mat-icon",18),s(1,"check_circle"),a())}function Sn(t,e){t&1&&(r(0,"mat-icon",19),s(1,"check_circle"),a())}function In(t,e){if(t&1){let o=N();r(0,"button",16),I("click",function(){w(o);let n=d(),m=d(3);return P(m.toggleCompleted(n))}),c(1,bn,1,0,"mat-spinner",17)(2,yn,2,0,"mat-icon",18)(3,Sn,2,0,"mat-icon",19),s(4),v(5,"trans"),a()}if(t&2){let o=d(),i=d(3);Et(o.isCompleted?"text-success":"text-secondary"),_("disabled",!i.canComplete()||i.markingCompleted()),l(),p(i.markingCompleted()?1:o.isCompleted?3:2),l(3),D(" ",X(5,5,"unitMarkAsCompleted")," ")}}function Tn(t,e){if(t&1&&(r(0,"p",4),s(1),a()),t&2){let o=d();l(),D(" ",o.summary," ")}}function wn(t,e){t&1&&(r(0,"div",5)(1,"strong"),s(2),v(3,"trans"),a(),s(4),v(5,"trans"),a()),t&2&&(l(2),D("",X(3,2,"editMode"),":"),l(2),D(" ",X(5,4,"noSummaryPlaceholder")," "))}function Pn(t,e){if(t&1){let o=N();r(0,"div",6)(1,"player",20),I("onProgress",function(n){w(o);let m=d(4);return P(m.videoProgress.set(n))}),a()()}if(t&2){let o=d(),i=d(3);l(),_("unique",o.video.id+"")("playerInfo",i.playerInfo())}}function kn(t,e){if(t&1&&(r(0,"div",7),C(1,"pdf-viewer",21),a()),t&2){let o=d();l(),_("filePath",o.articleUrl)}}function Un(t,e){if(t&1&&C(0,"game",8),t&2){let o=d();_("url",o.gameUrl)("unit",o.id)}}function An(t,e){if(t&1&&C(0,"div",9),t&2){let o=d();_("innerHTML",o.text,dt)}}function On(t,e){if(t&1&&C(0,"exam",10),t&2){let o=d();_("unit",o)}}function Fn(t,e){if(t&1&&(r(0,"div",11)(1,"h3"),s(2),v(3,"trans"),a(),C(4,"atts",10),a()),t&2){let o=d();l(2),x(X(3,2,"unitAttsTitle")),l(2),_("unit",o)}}function Ln(t,e){if(t&1&&(r(0,"button",13),s(1," \u05DC\u05D9\u05D7\u05D9\u05D3\u05D4 \u05D4\u05E7\u05D5\u05D3\u05DE\u05EA "),r(2,"mat-icon"),s(3,"arrow_forward"),a()()),t&2){let o=d(4);_("routerLink",nt(1,Ui,o.prevUnit().id))}}function Nn(t,e){if(t&1&&(r(0,"button",14),s(1," \u05DC\u05D9\u05D7\u05D9\u05D3\u05D4 \u05D4\u05D1\u05D0\u05D4 "),r(2,"mat-icon",22),s(3,"arrow_back"),a()()),t&2){let o=d(4);_("routerLink",nt(1,Ui,o.nextUnit().id))}}function $n(t,e){if(t&1&&(r(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),s(3),a(),c(4,En,2,1,"mat-card-subtitle"),C(5,"div",1),c(6,Mn,5,6,"button",2),c(7,In,6,7,"button",3),a(),r(8,"mat-card-content"),c(9,Tn,2,1,"p",4)(10,wn,6,6,"div",5),c(11,Pn,2,2,"div",6),c(12,kn,2,1,"div",7),c(13,Un,1,2,"game",8),c(14,An,1,1,"div",9),c(15,On,1,1,"exam",10),c(16,Fn,5,4,"div",11),a(),r(17,"mat-card-actions",12)(18,"div"),c(19,Ln,4,3,"button",13),a(),r(20,"div"),c(21,Nn,4,3,"button",14),a()()()),t&2){let o,i=e,n=d(3);l(3),D(" ",i==null?null:i.title," "),l(),p(i.author?4:-1),l(2),p(i.atts!=null&&i.atts.length?6:-1),l(),p(!n.editMode()&&n.canCompletedUnit()?7:-1),l(2),p(i.summary?9:n.editMode()?10:-1),l(2),p(i.typeID===n.contentTypes.Video&&n.playerInfo()?11:-1),l(),p(i.typeID===n.contentTypes.Article&&(i.articleUrl!=null&&i.articleUrl.length)?12:-1),l(),p(i.typeID==n.contentTypes.Game&&(i.gameUrl!=null&&i.gameUrl.length)?13:-1),l(),p(i.text!=null&&i.text.length?14:-1),l(),p(n.isExam()?15:-1),l(),p((o=n.atts())!=null&&o.length?16:-1),l(3),p(n.prevUnit()?19:-1),l(2),p(n.nextUnit()?21:-1)}}function Bn(t,e){if(t&1&&c(0,$n,22,13,"mat-card",0),t&2){let o,i=d(2);p((o=i.unit())?0:-1,o)}}function jn(t,e){if(t&1&&c(0,Bn,1,1),t&2){let o,i=d();p((o=i.chapter())?0:-1,o)}}var Ai=(()=>{let e=class e{constructor(){this.service=u(ot),this.coursesService=u(vt),this.appService=u(Dt),this.snackbar=u(it),this.route=u(R),this.title=u(Ut),this.course=this.service.course,this.chapterID=f(0),this.chapter=f(void 0),this.unitID=f(0),this.unit=f(void 0),this.atts=k(()=>this.unit()?.atts),this.playerInfo=f(void 0),this.loading=f(!1),this.error=f(void 0),this.editMode=this.appService.editMode,this.prevUnit=f(void 0),this.nextUnit=f(void 0),this.videoProgress=f(0),this.isCompleted=f(!1),this.canCompletedUnit=k(()=>!!this.unit()&&![z.Exam,z.FinalExam,z.Game].includes(this.unit().typeID)),this.canComplete=k(()=>!!this.unit()&&![z.Exam,z.FinalExam,z.Game].includes(this.unit().typeID)&&(this.unit().typeID!==z.Video||this.videoProgress()>=(this.playerInfo()?.vMin||0)&&!this.isCompleted())),this.isExam=k(()=>!!this.unit()&&[z.Exam,z.FinalExam].includes(this.unit().typeID)),this.contentTypes=z,this.markingCompleted=f(!1),$(()=>{this.error()&&this.snackbar.error({title:"\u05E9\u05D2\u05D9\u05D0\u05D4",msg:this.error(),btn:"\u05E1\u05D2\u05D5\u05E8",duration:1e4})}),M([this.course],([i])=>{this.chapter.set(void 0),this.unit.set(void 0),i&&this.title.setTitle(`\u05DE\u05E8\u05D7\u05D1 \u05DC\u05DE\u05D9\u05D3\u05D4 - ${si.course} ${i.name}`)}),M([this.chapterID,this.unitID],([i,n])=>{if(this.loading.set(!1),!!this.course()){if(i!=this.chapter()?.id){let m=this.course().chapters?.find(h=>h.id===i);if(!m){Jt(()=>new Error("Chapter not found"));return}this.chapter.set(m)}if(n!=this.unit()?.id){let m=this.chapter().units?.find(h=>h.id===n);if(!m){Jt(()=>new Error("Unit not found"));return}this.unit.set(m)}}}),M([this.unit],([i])=>{if(!i)return;this.title.setTitle(`${this.title.getTitle()} - ${i.title}`),this.isCompleted.set(i.isCompleted||!1),i.typeID==z.Video&&(this.playerInfo.set(void 0),i.video?.playerInfo?setTimeout(h=>this.playerInfo.set(h),0,i.video.playerInfo):(this.playerInfo.set(void 0),this.coursesService.getVideoPlayerInfo(i.refID,this.course().id).subscribe(h=>this.playerInfo.set(h))));let n=this.course().chapters?.reduce((h,H)=>h.concat(H.units||[]),[])?.map(h=>({id:h.id,name:h.title})),m=n?.findIndex(h=>h.id===i.id);this.prevUnit.set(void 0),this.nextUnit.set(void 0),m!=null&&n?.length&&(m>0&&this.prevUnit.set(n?.[m-1]),m<n?.length-1&&this.nextUnit.set(n?.[m+1]))}),M([this.videoProgress],([i])=>{i>=(this.playerInfo()?.vMax||0)&&!this.unit().isCompleted&&this.toggleCompleted(this.unit(),!0)}),this.route.params.pipe(ft()).subscribe(i=>{this.chapterID.set(+i.chapterID),this.unitID.set(+i.unitID)})}toggleCompleted(i,n=!1){this.markingCompleted()||(this.markingCompleted.set(!0),this.coursesService.toggleCompleted(i.id,n).pipe(q(()=>this.markingCompleted.set(!1))).subscribe({next:()=>{i.isCompleted=!i.isCompleted,this.isCompleted.set(i.isCompleted)},error:m=>this.error.set(m)}))}scrollToAttachments(){(this.unit()?.atts??[]).length>0&&document.getElementById("attachments-section")?.scrollIntoView({behavior:"smooth",block:"start"})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["ng-component"]],decls:2,vars:2,consts:[["appearance","outlined"],[1,"spacer"],["mat-stroked-button","","type","button",3,"class"],["mat-stroked-button","","type","button",3,"disabled","class"],[1,"line-breaks"],[1,"open-text","editmode-box"],[1,"video"],[1,"article"],[3,"url","unit"],[1,"open-text",3,"innerHTML"],[3,"unit"],["id","attachments-section",1,"atts"],[1,"flex","between"],["mat-button","",3,"routerLink"],["mat-flat-button","",3,"routerLink"],["mat-stroked-button","","type","button",3,"click"],["mat-stroked-button","","type","button",3,"click","disabled"],["diameter","20"],["fontSet","material-icons-outlined"],[1,"text-success"],[3,"onProgress","unique","playerInfo"],[3,"filePath"],["iconPositionEnd",""]],template:function(n,m){n&1&&(c(0,vn,1,0,"shared-loading"),c(1,jn,1,1)),n&2&&(p(m.loading()?0:-1),l(),p(m.course()?1:-1))},dependencies:[J,Y,et,K,Ct,Z,tt,st,W,E,A,B,O,Pe,gt,We,Ii,Ze,ki,Ti,zt],styles:["[_nghost-%COMP%]{display:block;height:100%}h2[_ngcontent-%COMP%]{font-weight:400;font-size:1.25rem}.video[_ngcontent-%COMP%]{max-width:800px;max-height:450px;height:100%;margin-bottom:1rem}.pdf[_ngcontent-%COMP%]{min-height:65vh;background-color:#9f9f9f}game[_ngcontent-%COMP%]{min-height:65vh;height:100%}.atts[_ngcontent-%COMP%]{margin:20px 0 50px}.atts[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.25rem}.editmode-box[_ngcontent-%COMP%]{padding:2px 4px;border:1px solid #ccc;background-color:#efefef}.nav-btns[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,auto);justify-content:space-between;align-items:center;width:100%}  .mat-mdc-outlined-button .mdc-button__label{gap:6px;display:flex!important}mat-card-header[_ngcontent-%COMP%]{gap:.5rem}"]});let t=e;return t})();var Oi=[{name:"\u05D4\u05DC\u05D5\u05D7 \u05E9\u05DC\u05D9.."},{name:"\u05E7\u05D5\u05E8\u05E1\u05D9\u05DD",route:"./courses"},{name:"\u05DE\u05D8\u05DC\u05D5\u05EA",route:"./assignments"}];var Vn=["drawer"],Fi=(()=>{let e=class e{constructor(){this.responsive=u(Je),this.isDesktop=this.responsive.isDesktop,this.isTablet=this.responsive.isTablet,this.isMobile=this.responsive.isMobile,this.sidenavMode=k(()=>this.isDesktop()?"side":"over"),this.sidenavOpened=k(()=>this.isDesktop()?this.sidenavState():null),this.sidenavState=f(!0),this.dashboardNav=Oi}toggleSidenav(i=!1){if(this.sidenav){if(!this.isDesktop()){this.sidenav.toggle();return}i||this.sidenavState.set(!this.sidenavState())}}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["ng-component"]],viewQuery:function(n,m){if(n&1&&de(Vn,5),n&2){let h;ue(h=ce())&&(m.sidenav=h.first)}},decls:6,vars:8,consts:[["drawer",""],[3,"mode","opened"],[3,"onItemClick","nav"],[1,"sidenav-content"]],template:function(n,m){if(n&1){let h=N();r(0,"mat-sidenav-container")(1,"mat-sidenav",1,0)(3,"generic-sidenav",2),I("onItemClick",function(){return w(h),P(m.toggleSidenav(!0))}),a()(),r(4,"mat-sidenav-content",3),C(5,"router-outlet"),a()()}n&2&&(Et(_e("sidenav-container ",m.isDesktop()?"desktop":"mobile")),kt("tablet",m.isTablet()),l(),_("mode",m.sidenavMode())("opened",m.sidenavOpened()),l(2),_("nav",m.dashboardNav))},dependencies:[fi,ct,J,pi,ui,ci,di,ht],styles:["[_nghost-%COMP%]{display:contents}mat-sidenav-container[_ngcontent-%COMP%]{padding-top:5vh;height:100vh}mat-sidenav-container.mobile[_ngcontent-%COMP%]:not(.tablet){height:calc(100vh - 56px)}mat-sidenav[_ngcontent-%COMP%]{padding-top:64px}.sidenav-content[_ngcontent-%COMP%]{padding:1rem 2rem 1rem 1rem}.sidenav-content.desktop[_ngcontent-%COMP%]{padding:20px}"]});let t=e;return t})();var Li=(()=>{let e=class e{constructor(){this.service=u(ti),this.state=this.service.state,this.dialog=u(ke),M([this.state],([i])=>{(i=="new"||i=="unrecoverable")&&this.openDialog()})}openDialog(){this.dialog.open(Rn,{disableClose:!0})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,m){n&1&&C(0,"router-outlet")},dependencies:[ct],encapsulation:2});let t=e;return t})(),Rn=(()=>{let e=class e{reload(){document.location.reload()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["ng-component"]],decls:7,vars:0,consts:[["mat-dialog-title",""],["mat-flat-button","","mat-dialog-close","",3,"click"]],template:function(n,m){n&1&&(r(0,"h2",0),s(1,"\u05D4\u05EA\u05D7\u05D3\u05E9\u05E0\u05D5..."),a(),r(2,"mat-dialog-content"),s(3,"\u05DC\u05D7\u05E6\u05D5 \u05E2\u05DC \u05D4\u05DB\u05E4\u05EA\u05D5\u05E8 \u05DC\u05D4\u05E4\u05E2\u05DC\u05D4 \u05E9\u05DC \u05D4\u05D2\u05E8\u05E1\u05D4 \u05D4\u05D7\u05D3\u05E9\u05D4"),a(),r(4,"mat-dialog-actions")(5,"button",1),I("click",function(){return m.reload()}),s(6,"\u05D4\u05E4\u05E2\u05DC\u05D4"),a()())},dependencies:[Le,Ue,Ae,Fe,Oe,E,A],encapsulation:2,changeDetection:0});let t=e;return t})();var Qt=(()=>{let e=class e{constructor(){this.API=`${y.apiUrl}/app/user-assignments`,this.http=u(V),this._refresh=f(1),this.refresh_=this._refresh.asReadonly()}refresh(){this._refresh.update(i=>i+1)}getItem(i){return this.http.get(`${this.API}/${i}`).pipe(G(n=>this.parseItem(n)))}saveSubmit(i){return this.http.post(`${this.API}/${i.uid}/submit`,{comment:i.studentComment})}parseItem(i){return i?.statusID||(i.statusID=lt.NotSubmitted),i}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=Q({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zn(t,e){if(t&1){let o=N();r(0,"div",1),I("filesChangeEmiter",function(n){w(o);let m=d();return P(m.uploadfiles(n))}),r(1,"input",2),I("change",function(n){w(o);let m=d();return P(m.selectFile(n))}),a(),r(2,"label",3)(3,"button",4),s(4," \u05DC\u05D7\u05E6\u05D5 \u05DC\u05D1\u05D7\u05D9\u05E8\u05EA \u05E7\u05D1\u05E6\u05D9\u05DD "),r(5,"mat-icon"),s(6,"cloud_upload"),a()()(),r(7,"div",5)(8,"p",6),s(9,"\u05E1\u05D5\u05D2\u05D9 \u05E7\u05D1\u05E6\u05D9\u05DD \u05DE\u05D5\u05E8\u05E9\u05D9\u05DD: "),a(),r(10,"ul")(11,"li"),s(12,"\u05DE\u05E1\u05DE\u05DB\u05D9\u05DD (doc, docx)"),a(),r(13,"li"),s(14,"\u05D0\u05E7\u05E1\u05DC (xls, xlsx)"),a(),r(15,"li"),s(16,"\u05EA\u05DE\u05D5\u05E0\u05D5\u05EA (jpg, png)"),a(),r(17,"li"),s(18,"\u05E7\u05D1\u05E6\u05D9 PDF"),a()()(),C(19,"error-msg",7),a()}if(t&2){let o=d();l(19),_("err",o.error())}}function Hn(t,e){if(t&1&&(C(0,"mat-progress-bar",8),r(1,"div"),s(2),a(),r(3,"div",9),s(4,` \u05D7\u05E9\u05D5\u05D1! \u05D4\u05E9\u05D0\u05D9\u05E8\u05D5 \u05D7\u05DC\u05D5\u05DF \u05D6\u05D4 \u05E4\u05EA\u05D5\u05D7 \u05E2\u05D3 \u05DC\u05E1\u05D9\u05D5\u05DD \u05D4\u05D4\u05E2\u05DC\u05D0\u05D4
`),a()),t&2){let o=d();_("value",o.progress()),l(2),D(" ",o.progress(),"% ")}}var Gn=2*1024*1024,Ni=(()=>{let e=class e{constructor(){this.item=U.required(),this.onUpload=De(),this.uploadUrl=f(""),this.uploading=f(!1),this.progress=f(void 0),this.error=f(void 0),this.http=u(V),this.service=u(Qt),this.snackbar=u(it),$(()=>{this.error()&&this.snackbar.error({title:"\u05E9\u05D2\u05D9\u05D0\u05D4",msg:this.error(),btn:"\u05E1\u05D2\u05D5\u05E8",duration:1e4})}),M([this.item],([i])=>{i&&this.uploadUrl.set(`${this.service.API}/${i}/upload`)})}selectFile(i){return Xt(this,null,function*(){let m=i.currentTarget.files;this.uploadfiles(Array.from(m||[])),i.target.value=null})}uploadfiles(i){return Xt(this,null,function*(){if(this.error.set(void 0),!i||!i.length)return;let n=i[0];if(n.type!="application/vnd.openxmlformats-officedocument.wordprocessingml.document"&&n.type!="application/msword"&&n.type!="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"&&n.type!="application/vnd.ms-excel"&&n.type!="image/jpg"&&n.type!="image/jpeg"&&n.type!="image/png"&&n.type!="application/pdf"&&n.type!=".pdf"){this.error.set("\u05E1\u05D5\u05D2 \u05D4\u05E7\u05D5\u05D1\u05E5 \u05D0\u05D9\u05E0\u05D5 \u05E0\u05EA\u05DE\u05DA");return}if(n.size>Gn){this.error.set("\u05D4\u05E7\u05D5\u05D1\u05E5 \u05D2\u05D3\u05D5\u05DC \u05DE\u05D4\u05DE\u05D5\u05EA\u05E8");return}this.uploading.set(!0);let m=new FormData;m.append("file",n,n.name);let h=new Ee({Accept:"application/json"}),H=new Me("POST",this.uploadUrl(),m,{context:Ke(),reportProgress:!0,headers:h});this.http.request(H).pipe(oe(b=>(this.error.set("\u05D0\u05E8\u05E2\u05D4 \u05E9\u05D2\u05D9\u05D0\u05D4 \u05D1\u05D4\u05E2\u05DC\u05D0\u05EA \u05D4\u05E7\u05D5\u05D1\u05E5"),ee(0))),G(b=>b.type===be.UploadProgress?Math.round(100*b.loaded/b.total):(b instanceof ye&&(this.uploading.set(!1),this.service.refresh(),this.onUpload.emit(b)),100)),ae(b=>this.progress.set(b)),q(()=>this.uploading.set(!1))).subscribe()})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["app-upload"]],inputs:{item:[1,"item"]},outputs:{onUpload:"onUpload"},decls:2,vars:1,consts:[["fileDragDrop","",1,"dropzone"],["fileDragDrop","",1,"dropzone",3,"filesChangeEmiter"],["type","file","name","file","id","file_article","accept",`application/docx, application/vnd.openxmlformats-officedocument.wordprocessingml.document,
     application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, image/jpeg, image/png, application/pdf, .pdf`,3,"change"],["for","file_article",1,"text-muted"],["mat-flat-button","","type","button",1,"btn"],[1,"remarks","text-muted"],[1,"center"],[3,"err"],["mode","determinate",3,"value"],[1,"text-danger"]],template:function(n,m){n&1&&c(0,zn,20,1,"div",0)(1,Hn,5,2),n&2&&p(m.uploading()?m.progress()?1:-1:0)},dependencies:[E,A,O,ze,Re,ni,Ye],styles:[".dropzone[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:.25rem;position:relative;min-height:140px;padding:20px 0;width:450px}input[type=file][_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:999;width:100%;height:100%;top:0;left:0;cursor:pointer}.center[_ngcontent-%COMP%]{text-align:center}.btn[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:.5rem}.remarks[_ngcontent-%COMP%]{color:#888}.remarks[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0}.remarks[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:inline-block;text-align:start;padding-inline-start:0;margin-inline-start:40px}"]});let t=e;return t})();function qn(t,e){t&1&&C(0,"shared-loading")}function Qn(t,e){if(t&1&&(r(0,"a",11),s(1,"\u05DC\u05D7\u05E5 \u05DB\u05D0\u05DF \u05DC\u05D4\u05D5\u05E8\u05D3\u05D4"),a()),t&2){let o=d(2);_("href",o.assFileUrl(),rt)}}function Xn(t,e){t&1&&s(0," \u05D0\u05D9\u05DF \u05E7\u05D5\u05D1\u05E5 \u05DE\u05E6\u05D5\u05E8\u05E3 ")}function Jn(t,e){t&1&&(r(0,"div",9),s(1," (\u05DE\u05DE\u05EA\u05D9\u05DF \u05DC\u05D1\u05D3\u05D9\u05E7\u05D4)"),a())}function Yn(t,e){if(t&1&&(r(0,"div",7)(1,"div",8),s(2,"\u05D4\u05E2\u05E8\u05EA \u05D4\u05DE\u05D5\u05E8\u05D4 \u05E2\u05DC \u05D4\u05DE\u05D8\u05DC\u05D4:"),a(),r(3,"div",9),s(4),a()()),t&2){let o,i=d(2);l(4),D(" ",(o=i.item())==null?null:o.teacherComment)}}function Kn(t,e){if(t&1&&(r(0,"div",7)(1,"div",8),s(2,"\u05D4\u05E7\u05D5\u05D1\u05E5 \u05DC\u05D4\u05D2\u05E9\u05D4 :"),a(),r(3,"div",9)(4,"a",11),s(5),a()()()),t&2){let o=d(3);l(4),_("href",o.studentFile(),rt),l(),D(" ",o.item().fileName)}}function Wn(t,e){if(t&1){let o=N();r(0,"mat-form-field",14)(1,"mat-label"),s(2,"\u05D4\u05E2\u05E8\u05D4 \u05DC\u05DE\u05D5\u05E8\u05D4"),a(),C(3,"textarea",15),a(),r(4,"app-upload",16),I("onUpload",function(n){w(o);let m=d(2);return P(m.onUpload(n))}),a(),c(5,Kn,6,2,"div",7),r(6,"button",17),I("click",function(){w(o);let n=d(2);return P(n.save())}),s(7,"\u05D4\u05D2\u05E9\u05D4"),a()}if(t&2){let o,i=d(2);l(3),_("formControl",i.studentComment),l(),_("item",(o=i.item())==null?null:o.uid),l(),p(i.studentFile()?5:-1)}}function Zn(t,e){if(t&1&&(r(0,"div",7)(1,"div",8),s(2,"\u05D4\u05E2\u05E8\u05EA\u05DA :"),a(),r(3,"div",9),s(4),a()()),t&2){let o,i=d(3);l(4),D(" ",(o=i.item())==null?null:o.studentComment)}}function to(t,e){if(t&1&&(r(0,"div",7)(1,"div",8),s(2,"\u05E6\u05D9\u05D5\u05DF: "),a(),r(3,"div",9),s(4),a()()),t&2){let o,i=d(3);l(4),D(" ",(o=i.item())==null?null:o.score)}}function eo(t,e){if(t&1&&(r(0,"div",7)(1,"div",8),s(2,"\u05D4\u05E7\u05D5\u05D1\u05E5 \u05E9\u05D4\u05D5\u05D2\u05E9 :"),a(),r(3,"div",9)(4,"a",11),s(5),a()()()),t&2){let o=d(3);l(4),_("href",o.studentFile(),rt),l(),D(" ",o.item().fileName)}}function io(t,e){if(t&1&&(r(0,"div",6),c(1,Zn,5,1,"div",7),c(2,to,5,1,"div",7),c(3,eo,6,2,"div",7),a()),t&2){let o,i=d(2);l(),p((o=i.item())!=null&&o.studentComment?1:-1),l(),p(i.item().score?2:-1),l(),p(i.studentFile()?3:-1)}}function no(t,e){if(t&1&&(r(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),s(3),a(),C(4,"div",1),r(5,"button",2)(6,"mat-icon",3),s(7,"arrow_backward"),a(),s(8," \u05D7\u05D6\u05D5\u05E8 "),a()(),r(9,"mat-card-content",4)(10,"mat-card",5)(11,"mat-card-content")(12,"div",6)(13,"div",7)(14,"div",8),s(15,"\u05EA\u05D0\u05E8\u05D9\u05DA \u05E4\u05EA\u05D9\u05D7\u05EA \u05D4\u05DE\u05D8\u05DC\u05D4:"),a(),r(16,"div",9),s(17),v(18,"dateLocal"),a()(),r(19,"div",7)(20,"div",8),s(21,"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D4\u05D2\u05E9\u05D4:"),a(),r(22,"div",9),s(23),v(24,"dateLocal"),v(25,"dateLocal"),a()(),r(26,"div",7)(27,"div",8),s(28,"\u05DE\u05D8\u05DC\u05D4 \u05E2\u05DD \u05E6\u05D9\u05D5\u05DF:"),a(),r(29,"div",9),s(30),a()(),r(31,"div",7)(32,"div",8),s(33,"\u05D4\u05E0\u05D7\u05D9\u05D5\u05EA \u05DE\u05D8\u05DC\u05D4:"),a(),C(34,"div",10),a(),r(35,"div",7)(36,"div",8),s(37,"\u05E7\u05D5\u05D1\u05E5 \u05DE\u05E6\u05D5\u05E8\u05E3:"),a(),r(38,"div",9),c(39,Qn,2,1,"a",11)(40,Xn,1,0),a()()()()(),r(41,"mat-card",12)(42,"mat-card-content")(43,"div",13)(44,"div",6)(45,"div",7)(46,"div",8),s(47,"\u05E1\u05D8\u05D8\u05D5\u05E1 \u05D4\u05D2\u05E9\u05D4:"),a(),r(48,"div",9),s(49),a(),c(50,Jn,2,0,"div",9),a(),c(51,Yn,5,1,"div",7),a(),c(52,Wn,8,3)(53,io,4,3,"div",6),a()()()()()),t&2){let o,i,n,m,h,H,b,at,bt,yt,T=d();l(3),D("\u05D4\u05D2\u05E9\u05EA \u05DE\u05D8\u05DC\u05D4: ",(o=T.item())==null?null:o.assignment.name," "),l(14),x(j(18,10,(i=T.item())==null?null:i.assignment.openDate,"date")),l(6),x(j(24,13,(n=T.item())==null?null:n.closeSubmitionDate,"date")||j(25,16,(n=T.item())==null?null:n.assignment.closeDate,"date")),l(7),x((m=T.item())!=null&&m.assignment.isScored?"\u05DB\u05DF":"\u05DC\u05D0"),l(4),_("innerHTML",(h=T.item())==null?null:h.assignment.desc,dt),l(5),p((H=T.item())!=null&&H.assignment.fileName?39:40),l(10),D(" ",T.userAssignmentStatuses((b=T.item())==null?null:b.statusID)),l(),p(((at=T.item())==null?null:at.statusID)==T.statuses.Submitted&&((at=T.item())==null?null:at.score)==null?50:-1),l(),p((bt=T.item())!=null&&bt.teacherComment?51:-1),l(),p(((yt=T.item())==null?null:yt.statusID)==T.statuses.NotSubmitted||((yt=T.item())==null?null:yt.statusID)==T.statuses.ReSubmit?52:53)}}var $i=(()=>{let e=class e{constructor(){this.snackbar=u(it),this.studentService=u(Qt),this.loading=f(!0),this.itemID=f(0),this.assFileUrl=f(void 0),this.error=f(void 0),this.studentFile=f(void 0),this.item=f(void 0),this.route=u(R),this.statuses=lt,this.userAssignmentStatuses=li,this.studentComment=new Be,this.saving=f(!1),$(()=>{this.error()&&this.snackbar.error({title:"\u05E9\u05D2\u05D9\u05D0\u05D4",msg:this.error(),btn:"\u05E1\u05D2\u05D5\u05E8",duration:1e4})}),this.route.params.pipe(ft()).subscribe(i=>{this.itemID.set(+i.id)}),M([this.itemID,this.studentService.refresh_],([i,n])=>{this.item.set(void 0),this.loading.set(!0),i!=0,this.getUserAssignment(i)})}getUserAssignment(i){this.studentService.getItem(i).subscribe(n=>{this.item.set(n),this.studentComment.reset(n.studentComment),n.url&&this.studentFile.set(y.filesUrl+n?.url),this.assFileUrl.set(y.filesUrl+n?.assignment?.url),this.loading.set(!1)})}onUpload(i){this.item.set(St(St({},this.item()),i.body)),this.studentFile.set(i.body.fileName)}save(){if(this.saving()||!this.studentComment.valid)return;this.saving.set(!0);let i=Wt(St({},this.item()),{studentComment:this.studentComment.value});this.studentService.saveSubmit(i).pipe(q(()=>this.saving.set(!1))).subscribe({next:n=>{this.snackbar.success({msg:"\u05D4\u05E4\u05E8\u05D9\u05D8 \u05E0\u05E9\u05DE\u05E8 \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4",duration:3e3}),this.studentService.refresh()},error:n=>this.error.set(n)})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["user-assignment"]],decls:2,vars:1,consts:[["appearance","outlined",1,"wrap"],[1,"spacer"],["mat-button","","color","primary","routerLink","../../"],["iconPositionEnd",""],[1,"container"],["appearance","outlined",1,"details"],[1,"meta-list"],[1,"meta-list-item"],[1,"caption"],[1,"val"],[1,"val",3,"innerHTML"],["target","_blank",3,"href"],["appearance","outlined"],[1,"submit"],["appearance","outline"],["matInput","","rows","3",3,"formControl"],[3,"onUpload","item"],["mat-flat-button","","color","primary",3,"click"]],template:function(n,m){n&1&&c(0,qn,1,0,"shared-loading")(1,no,54,19,"mat-card",0),n&2&&p(m.loading()?0:m.item()?1:-1)},dependencies:[Ve,Ne,$e,je,E,A,B,O,et,K,Z,tt,W,we,Te,Ie,Ge,He,Y,Ni,xt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-top:10vh}.wrap[_ngcontent-%COMP%]{margin-right:2rem;margin:auto;padding:2rem}.details[_ngcontent-%COMP%]{width:240px}.container[_ngcontent-%COMP%]{display:flex;gap:2rem;width:100%;height:90%}.container[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.container[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{align-self:flex-end;padding:0 3rem}mat-card[_ngcontent-%COMP%]{min-width:300px}"]});let t=e;return t})();var oo=t=>["../user-assignment",t];function ao(t,e){t&1&&(r(0,"h2"),s(1,"\u05D0\u05D9\u05DF \u05DE\u05D8\u05DC\u05D5\u05EA \u05DC\u05D4\u05E6\u05D2\u05D4"),a())}function ro(t,e){if(t&1&&(r(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title-group")(3,"mat-card-title")(4,"b"),s(5," \u05DE\u05D8\u05DC\u05D4:"),a(),s(6),a(),r(7,"mat-card-subtitle")(8,"b"),s(9," \u05DE\u05D5\u05E8\u05D4:"),a(),s(10),a()()(),r(11,"mat-card-content")(12,"div")(13,"b"),s(14,"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D0\u05D7\u05E8\u05D5\u05DF \u05DC\u05D4\u05D2\u05E9\u05D4 "),a(),s(15),v(16,"dateLocal"),v(17,"dateLocal"),a(),r(18,"div",2)(19,"b"),s(20,"\u05E1\u05D8\u05D8\u05D5\u05E1 \u05D4\u05D2\u05E9\u05D4: "),a(),s(21),a(),r(22,"div",2)(23,"b"),s(24," \u05E6\u05D9\u05D5\u05DF: "),a(),s(25),a(),r(26,"div",2)(27,"b"),s(28," \u05D4\u05E2\u05E8\u05EA \u05D4\u05DE\u05D5\u05E8\u05D4: "),a(),s(29),a()(),r(30,"mat-card-actions")(31,"button",3),s(32," \u05DB\u05E0\u05D9\u05E1\u05D4 "),r(33,"mat-icon",4),s(34,"arrow_backward"),a()()()()),t&2){let o=e.$implicit,i=d(2);_("routerLink",nt(13,oo,o.id)),l(6),D(" ",o.assignment.name),l(4),D(" ",o.assignment.teacherName," "),l(5),x(j(16,7,o.closeSubmitionDate,"date")||j(17,10,o.assignment.closeDate,"date")),l(6),D(" ",i.userAssignmentStatuses(o.statusID)," "),l(4),D(" ",o.score||"\u05DC\u05D0 \u05E0\u05D9\u05EA\u05DF \u05E2\u05D3\u05D9\u05D9\u05DF \u05E6\u05D9\u05D5\u05DF "," "),l(4),D(" ",o.teacherComment||"\u05DC\u05D0 \u05E0\u05EA\u05E0\u05D4 \u05D4\u05E2\u05E8\u05D4 "," ")}}function so(t,e){if(t&1&&F(0,ro,35,15,"mat-card",1,Tt),t&2){let o=d();L(o.allAssignments())}}var Bi=(()=>{let e=class e{constructor(){this.http=u(V),this.allAssignments=f([]),this.statuses=lt,this.userAssignmentStatuses=mi,this.http.get(`${y.apiUrl}/app/dashboard-user-assignments`).pipe(G(i=>i.map(n=>this.parseItem(n)))).subscribe(i=>{this.allAssignments.set(i)})}parseItem(i){return i.statusID||(i.statusID=lt.NotSubmitted),i}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["assignment"]],decls:3,vars:1,consts:[[1,"cards"],["appearance","outlined",3,"routerLink"],[1,"caption"],["mat-button","","color","primary"],["iconPositionEnd",""]],template:function(n,m){n&1&&(r(0,"div",0),c(1,ao,2,0,"h2")(2,so,2,0),a()),n&2&&(l(),p(m.allAssignments()?2:1))},dependencies:[Y,et,K,Ct,Z,tt,st,W,_t,E,A,B,O,xt],styles:["h1[_ngcontent-%COMP%]{height:80px;display:flex;justify-content:flex-start;align-items:center;padding:0 1.25rem;font-size:1.25rem;font-weight:400;border-bottom:1px solid #ccc}.cards[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-wrap:wrap;gap:1rem;padding:1rem}mat-card[_ngcontent-%COMP%]{width:100%;max-width:300px;cursor:pointer}mat-card[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;box-shadow:0 0 10px #0003;transition:all .3s ease-in-out}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;height:100%;min-height:110px}@media (min-width: 600px){mat-card[_ngcontent-%COMP%]{max-width:49%}}@media (min-width: 900px){mat-card[_ngcontent-%COMP%]{max-width:32%}}"]});let t=e;return t})();var lo=t=>["../courses",t];function mo(t,e){t&1&&(r(0,"h2"),s(1,"\u05D0\u05D9\u05DF \u05E7\u05D5\u05E8\u05E1\u05D9\u05DD \u05DC\u05D4\u05E6\u05D2\u05D4"),a())}function uo(t,e){if(t&1&&(r(0,"div",2),s(1),a()),t&2){let o=d().$implicit;l(),x(o.desc)}}function co(t,e){if(t&1&&(r(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title-group")(3,"mat-card-title"),s(4),a(),r(5,"mat-card-subtitle"),s(6),a()()(),r(7,"mat-card-content"),c(8,uo,2,1,"div",2),r(9,"div"),s(10),a()(),r(11,"mat-card-actions")(12,"button",3),s(13," \u05DB\u05E0\u05D9\u05E1\u05D4 "),r(14,"mat-icon",4),s(15,"arrow_backward"),a()()()()),t&2){let o=e.$implicit,i=d(2);_("routerLink",nt(6,lo,o.id)),l(4),x(o.name),l(2),ut(" ",o.schoolName," | ",o.className," "),l(2),p(o.desc!=null&&o.desc.length?8:-1),l(2),x(i.gendersTrans(o.genderID))}}function po(t,e){if(t&1&&F(0,co,16,8,"mat-card",1,Tt),t&2){let o=d();L(o.allCourses())}}var ji=(()=>{let e=class e{constructor(){this.http=u(V),this.allCourses=f([]),this.gendersTrans=Gt,this.http.get(`${y.apiUrl}/app/dashboard`).subscribe(i=>this.allCourses.set(i))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=g({type:e,selectors:[["courses"]],decls:3,vars:1,consts:[[1,"cards"],["appearance","outlined",3,"routerLink"],[1,"summary"],["mat-button","","color","primary"],["iconPositionEnd",""]],template:function(n,m){n&1&&(r(0,"div",0),c(1,mo,2,0,"h2")(2,po,2,0),a()),n&2&&(l(),p(m.allCourses()?2:1))},dependencies:[Y,et,K,Ct,Z,tt,st,W,_t,E,A,B,O],styles:["h1[_ngcontent-%COMP%]{height:80px;display:flex;justify-content:flex-start;align-items:center;padding:0 1.25rem;font-size:1.25rem;font-weight:400;border-bottom:1px solid #ccc}.cards[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;flex-wrap:wrap;gap:1rem;padding:1rem}mat-card[_ngcontent-%COMP%]{width:100%;max-width:300px;cursor:pointer}mat-card[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;box-shadow:0 0 10px #0003;transition:all .3s ease-in-out}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;height:100%;min-height:110px}@media (min-width: 600px){mat-card[_ngcontent-%COMP%]{max-width:49%}}@media (min-width: 900px){mat-card[_ngcontent-%COMP%]{max-width:32%}}"]});let t=e;return t})();var g0=[{path:"",component:Li,children:[{path:"",component:Fi,children:[{path:"",redirectTo:"courses",pathMatch:"full"},{path:"courses",component:ji},{path:"assignments",component:Bi}]},{path:"courses/:id",component:Mi,children:[{path:"",component:Ei,pathMatch:"full"},{path:":chapterID/:unitID",component:hi,data:{component:yi},children:[{path:"",component:Ai,pathMatch:"full"}]}]},{path:"user-assignment/:id",component:$i},{path:"exam",loadChildren:()=>import("./chunk-7CFNLSDO.js").then(t=>t.EXAM_ROUTES)}]}];export{g0 as LEARN_ROUTES};
