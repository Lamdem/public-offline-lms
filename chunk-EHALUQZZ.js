import{a as Ye}from"./chunk-MMTG4S76.js";import{a as He,b as We}from"./chunk-DFY6UXGT.js";import{a as Je}from"./chunk-TEDVKY3J.js";import{a as oe}from"./chunk-K6GBJGWM.js";import{a as se}from"./chunk-I35Y2QOD.js";import{a as le}from"./chunk-FZVJKCT4.js";import{a as Z}from"./chunk-2UUWE3MU.js";import{$a as d,$b as Te,$d as Ge,Bc as Ne,Be as R,Bf as P,Ca as C,Ce as G,De as $,Fb as c,Ff as qe,Gb as f,Ge as Oe,He as Ue,Ia as y,Ja as S,L as De,La as Ee,Le as Qe,Ma as ae,Mb as Se,Me as ne,Na as me,Nb as k,O as q,Oa as p,Pa as n,Qa as i,Qb as Me,Ra as D,S as he,Td as ee,Ud as te,Va as _e,Vd as Re,W as u,Wa as be,X as _,Y as b,Ya as O,_a as h,a as de,ae as $e,ba as M,ca as x,db as ge,de as Pe,eb as Ce,fb as xe,fc as J,fe as Le,gc as ke,hd as Ae,he as ie,ic as Y,j as ce,je as w,kb as ye,kd as Be,ld as Ve,le as N,mb as a,me as A,n as U,nb as E,ng as L,ob as g,pa as l,pg as re,qd as H,qe as B,rc as Ie,rd as W,re as je,s as fe,sd as I,ta as ve,te as V,ue as ze,vd as Fe,wd as K,we as F,xa as T,xc as we,yd as X,z as Q}from"./chunk-B4G34RIT.js";var j=`${Z.apiUrl}/admin/tenants`,z=(()=>{let r=class r{constructor(){this.http=u(Ie),this.tenant=u(oe),this.destroyRef=u(M),this.refresh_=new ce(1),this.item$=this.refresh_.pipe(I(this.destroyRef),De(e=>this.getItem()))}refresh(){this.refresh_.next(this.refresh_.value+1)}getItem(){return this.http.get(`${j}`).pipe(fe(e=>this.parseItem(e)))}save(e){return e.useCreators=e.useCreators||!1,e.useTz=e.useTz||!1,this.http.post(j,e).pipe(q(()=>this.tenant.refresh()))}setPayment(e){return this.http.post(`${j}/payment`,e)}exploreBunny(){return this.http.get(`${j}/bunny/explore`)}setBunny(e){return this.http.post(`${j}/bunny`,e)}setEmail(e){return this.http.post(`${j}/email`,e)}parseItem(e){return e}};r.\u0275fac=function(m){return new(m||r)},r.\u0275prov=he({token:r,factory:r.\u0275fac,providedIn:"root"});let t=r;return t})();var rt=(t,r)=>r.id;function ot(t,r){if(t&1&&(n(0,"mat-option",11),a(1),i()),t&2){let s=r.$implicit;p("value",+s.id),l(),E(s.name)}}function at(t,r){if(t&1&&(n(0,"mat-option",11),a(1),i()),t&2){let s=r.$implicit;p("value",+s.id),l(),E(s.name)}}function mt(t,r){if(t&1&&(n(0,"mat-form-field",8)(1,"label",9),a(2,"Video Library:"),i(),n(3,"mat-select",10)(4,"mat-option"),a(5),c(6,"trans"),i(),ae(7,ot,2,2,"mat-option",11,rt),i()(),n(9,"mat-form-field",8)(10,"label",12),a(11,"Storage Zone:"),i(),n(12,"mat-select",13)(13,"mat-option"),a(14),c(15,"trans"),i(),ae(16,at,2,2,"mat-option",11,Ee),i()()),t&2){let s=r;l(5),E(f(6,2,"select")),l(2),me(s.libraries),l(7),E(f(15,4,"select")),l(2),me(s.storages)}}var Ke=(()=>{let r=class r{constructor(e){this.service=u(z),this.snackbar=u(P),this.data=u(te),this.item=Se(()=>this.data?.bunny),this.error=x(void 0),this.data$=this.service.exploreBunny().pipe(Q(o=>(console.log("here",o),this.error=o,U))),this.dialogRef=u(ee);let m=w;this.f=e.group({libraryId:[],storageId:[]}),this.c=this.f.controls,k(()=>{this.error()&&this.snackbar.error({msg:this.error(),title:se.errorTitle,btn:se.btns.close,duration:1e4})}),Pe([this.item],([o])=>{o||this.f.reset(o)})}save(){this.service.setBunny(this.f.value).subscribe({next:()=>{this.service.refresh(),this.close()},error:e=>this.error.set(e)})}close(){this.dialogRef.close()}};r.\u0275fac=function(m){return new(m||r)(ve(R))},r.\u0275cmp=T({type:r,selectors:[["ng-component"]],decls:14,vars:9,consts:[[1,"v2-card"],[1,"card-header"],["novalidate","",3,"ngSubmit","formGroup"],[1,"card-content"],[3,"err"],[1,"card-footer"],["mat-button","","type","button","tabindex","-1",3,"click"],["mat-flat-button","","color","primary",3,"disabled"],[1,"mb-3"],["for","lib",1,"form-label"],["formControlName","libraryId"],[3,"value"],["for","key",1,"form-label"],["formControlName","storageId"]],template:function(m,o){if(m&1&&(n(0,"div",0)(1,"div",1),a(2," \u05E4\u05E8\u05D8\u05D9 \u05D7\u05D9\u05D1\u05D5\u05E8 \u05DC-Bunny "),i(),n(3,"form",2),h("ngSubmit",function(){return o.save()}),n(4,"div",3),y(5,mt,18,6),c(6,"async"),D(7,"error-msg",4),i(),n(8,"div",5)(9,"button",6),h("click",function(){return o.close()}),a(10,"\u05E1\u05D2\u05D9\u05E8\u05D4"),i(),n(11,"button",7),a(12),c(13,"trans"),i()()()()),m&2){let v;l(3),p("formGroup",o.f),l(2),S((v=f(6,5,o.data$))?5:-1,v),l(2),p("err",o.error()),l(4),p("disabled",!!o.error||o.f.invalid),l(),E(f(13,7,"btns.save"))}},dependencies:[Y,G,B,N,A,$,V,F,X,K,W,H,ne,Ue,Oe,Ae,qe,J,L],encapsulation:2});let t=r;return t})();var lt=["focus"];function st(t,r){if(t&1&&(n(0,"mat-error"),a(1),c(2,"validate"),i()),t&2){let s=d();l(),g(" ",f(2,1,s.c.smtp.errors)," ")}}function ut(t,r){if(t&1&&(n(0,"mat-error"),a(1),c(2,"validate"),i()),t&2){let s=d();l(),g(" ",f(2,1,s.c.port.errors)," ")}}function pt(t,r){if(t&1&&(n(0,"mat-error"),a(1),c(2,"validate"),i()),t&2){let s=d();l(),g(" ",f(2,1,s.c.username.errors)," ")}}function dt(t,r){if(t&1&&(n(0,"mat-error"),a(1),c(2,"validate"),i()),t&2){let s=d();l(),g(" ",f(2,1,s.c.pwd.errors)," ")}}function ct(t,r){if(t&1&&(n(0,"mat-error"),a(1),c(2,"validate"),i()),t&2){let s=d();l(),g(" ",f(2,1,s.f.get("sender.address").errors)," ")}}function ft(t,r){if(t&1&&(n(0,"mat-error"),a(1),c(2,"validate"),i()),t&2){let s=d();l(),g(" ",f(2,1,s.f.get("sender.displayName").errors)," ")}}var Xe=(()=>{let r=class r{constructor(){this.service=u(z),this.destroyRef=u(M),this.error=x(void 0),this.snackbar=u(P),this.dialogRef=u(ee),this.data=u(te),this.item=Me.required(),k(()=>{this.error()&&this.snackbar.error({title:"\u05E9\u05D2\u05D9\u05D0\u05D4",msg:this.error(),btn:"\u05E1\u05D2\u05D5\u05E8",duration:1e4})});let e=u(R),m=w;this.f=e.group({smtp:[void 0,[m.minLength(4)]],port:[void 0],isSsl:[void 0],username:[void 0],pwd:[void 0],sender:e.group({address:[,[m.email]],displayName:[]})}),this.c=this.f.controls,this.f.valueChanges.pipe(I(this.destroyRef)).subscribe()}ngOnInit(){let e=this.item();e&&this.f.reset(e.email)}ngAfterViewInit(){this.focusRef?.nativeElement&&this.focusRef.nativeElement.focus()}save(){this.service.setEmail(JSON.stringify(this.f.value)).subscribe({next:()=>{this.snackbar.success({title:"\u05E9\u05DE\u05D9\u05E8\u05D4",msg:"\u05D4\u05E4\u05E8\u05D9\u05D8 \u05E0\u05E9\u05DE\u05E8 \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4",btn:"\u05E1\u05D2\u05D5\u05E8",duration:1e4}),this.service.refresh()},error:e=>{this.error.set(e.message+" "+e.subMessage)}})}};r.\u0275fac=function(m){return new(m||r)},r.\u0275cmp=T({type:r,selectors:[["ng-component"]],viewQuery:function(m,o){if(m&1&&ge(lt,5),m&2){let v;Ce(v=xe())&&(o.focusRef=v)}},inputs:{item:[1,"item"]},decls:52,vars:11,consts:[["focus",""],[1,"modal-header"],[1,"modal-title","pull-left"],["mat-icon-button","","type","button",3,"click"],["novalidate","",3,"ngSubmit","formGroup"],[1,"modal-body"],[1,"form-row"],["appearance","outline",1,"smtp-field"],["matInput","","id","smtp","formControlName","smtp","autocomplete","off"],[4,"ngIf"],["appearance","outline",1,"port-field"],["matInput","","type","number","id","port","formControlName","port","autocomplete","off"],["formControlName","isSsl",1,"ssl-checkbox"],["appearance","outline",1,"username-field"],["matInput","","id","username","formControlName","username","autocomplete","username"],["appearance","outline",1,"password-field"],["matInput","","type","password","id","pwd","formControlName","pwd","autocomplete","new-password"],["formGroupName","sender",1,"form-row"],["appearance","outline",1,"email-field"],["matInput","","type","email","id","address","formControlName","address","autocomplete","email"],["appearance","outline",1,"name-field"],["matInput","","id","displayName","formControlName","displayName","autocomplete","name"],[1,"modal-footer"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-button","","type","button",3,"click"]],template:function(m,o){if(m&1){let v=O();n(0,"div",1)(1,"p",2),a(2,"\u05D4\u05D2\u05D3\u05E8\u05D5\u05EA \u05E9\u05DC\u05D9\u05D7\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC\u05D9\u05DD"),i(),n(3,"button",3),h("click",function(){return _(v),b(o.dialogRef.close())}),n(4,"mat-icon"),a(5,"close"),i()()(),n(6,"form",4),h("ngSubmit",function(){return _(v),b(o.save())}),n(7,"div",5)(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),a(11,"\u05DB\u05EA\u05D5\u05D1\u05EA SMTP"),i(),D(12,"input",8,0),C(14,st,3,3,"mat-error",9),i(),n(15,"mat-form-field",10)(16,"mat-label"),a(17,"Port"),i(),D(18,"input",11),C(19,ut,3,3,"mat-error",9),i(),n(20,"mat-checkbox",12),a(21," SSL "),i()(),n(22,"div",6)(23,"mat-form-field",13)(24,"mat-label"),a(25,"\u05E9\u05DD \u05DE\u05E9\u05EA\u05DE\u05E9"),i(),D(26,"input",14),C(27,pt,3,3,"mat-error",9),i(),n(28,"mat-form-field",15)(29,"mat-label"),a(30,"\u05E1\u05D9\u05E1\u05DE\u05D4"),i(),D(31,"input",16),C(32,dt,3,3,"mat-error",9),i()(),n(33,"div",17)(34,"mat-form-field",18)(35,"mat-label"),a(36,"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D4\u05E9\u05D5\u05DC\u05D7"),i(),D(37,"input",19),C(38,ct,3,3,"mat-error",9),i(),n(39,"mat-form-field",20)(40,"mat-label"),a(41,"\u05E9\u05DD \u05D4\u05E9\u05D5\u05DC\u05D7 "),n(42,"small"),a(43,"(\u05D0\u05E4\u05E9\u05E8 \u05D1\u05E2\u05D1\u05E8\u05D9\u05EA)"),i()(),D(44,"input",21),C(45,ft,3,3,"mat-error",9),i()()(),n(46,"div",22)(47,"button",23),a(48),c(49,"trans"),i(),n(50,"button",24),h("click",function(){return _(v),b(o.dialogRef.close())}),a(51,"\u05E1\u05D2\u05D9\u05E8\u05D4"),i()()()}m&2&&(l(6),p("formGroup",o.f),l(8),p("ngIf",o.c.smtp.dirty&&!o.c.smtp.valid),l(5),p("ngIf",o.c.port.dirty&&!o.c.port.valid),l(8),p("ngIf",o.c.username.dirty&&!o.c.username.valid),l(5),p("ngIf",o.c.pwd.dirty&&!o.c.pwd.valid),l(6),p("ngIf",o.f.get("sender.address").dirty&&!o.f.get("sender.address").valid),l(7),p("ngIf",o.f.get("sender.displayName").dirty&&!o.f.get("sender.displayName").valid),l(2),p("disabled",o.f.invalid),l(),g(" ",f(49,9,"btns.save")," "))},dependencies:[G,B,ie,je,N,A,$,V,F,ze,$e,Ge,W,H,Be,Ve,ne,Qe,X,K,Fe,We,He,re,L],encapsulation:2});let t=r;return t})();function Dt(t,r){if(t&1){let s=O();n(0,"div",4)(1,"a",19),a(2,"webhooks"),i(),n(3,"button",20),h("click",function(){_(s);let m=d().ngIf,o=d();return b(o.openModal(m,"bunny"))}),a(4,"bunny"),i(),n(5,"button",20),h("click",function(){_(s);let m=d().ngIf,o=d();return b(o.openModal(m,"payment"))}),a(6,"\u05DE\u05E1\u05D5\u05E3 \u05EA\u05E9\u05DC\u05D5\u05DD (\u05E7\u05D0\u05E8\u05D3\u05E7\u05D5\u05DD)"),i(),n(7,"button",20),h("click",function(){_(s);let m=d().ngIf,o=d();return b(o.openModal(m,"email"))}),a(8,"\u05D0\u05D9\u05DE\u05D9\u05D9\u05DC"),i()()}}function ht(t,r){if(t&1&&(n(0,"div",11),a(1),c(2,"validate"),i()),t&2){let s=d(2);l(),E(f(2,1,s.c.support.errors))}}function vt(t,r){t&1&&(n(0,"ul",15)(1,"li",21),a(2," \u05D4\u05D2\u05D3\u05E8\u05D5\u05EA \u05D1\u05D4\u05E8\u05E9\u05D0\u05EA \u05E1\u05D5\u05E4\u05E8 "),i(),n(3,"li",22)(4,"div",12),D(5,"input",23),n(6,"label",24),a(7,"\u05D0\u05E4\u05E9\u05E8 \u05E8\u05D9\u05D1\u05D5\u05D9 \u05DE\u05E9\u05EA\u05DE\u05E9\u05D9\u05DD \u05DC\u05D7\u05E9\u05D1\u05D5\u05DF (\u05D9\u05DC\u05D3\u05D9\u05DD \u05D1\u05DE\u05E9\u05E4\u05D7\u05D4)"),i()()(),n(8,"li",22)(9,"div",12),D(10,"input",25),n(11,"label",26),a(12,"\u05DE\u05D5\u05D3\u05D5\u05DC \u05D9\u05D5\u05E6\u05E8\u05D9\u05DD \u05DE\u05D5\u05E4\u05E2\u05DC \u05D1\u05D8\u05E0\u05E0\u05D8 \u05D6\u05D4"),i()()()())}function Et(t,r){if(t&1){let s=O();_e(0),n(1,"div",1)(2,"div",2)(3,"h5",3),a(4),i(),y(5,Dt,9,0,"div",4),i(),n(6,"form",5),h("ngSubmit",function(){_(s);let m=d();return b(m.save())}),n(7,"div",6)(8,"div",7)(9,"div",8)(10,"label",9),a(11,"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC \u05DC\u05EA\u05DE\u05D9\u05DB\u05D4:"),i(),D(12,"input",10),y(13,ht,3,3,"div",11),i()(),n(14,"div",7)(15,"div",8)(16,"div",12),D(17,"input",13),n(18,"label",14),a(19,"\u05D7\u05D5\u05D1\u05D4 \u05DC\u05D4\u05D6\u05D9\u05DF \u05DE\u05E1\u05E4\u05E8 \u05D6\u05D4\u05D5\u05EA \u05D1\u05E2\u05EA \u05D4\u05E8\u05E9\u05DE\u05D4"),i()()()(),y(20,vt,13,0,"ul",15),i(),n(21,"div",16)(22,"button",17),a(23),c(24,"trans"),i(),n(25,"button",18),h("click",function(){_(s);let m=d();return b(m.cancel())}),a(26),c(27,"trans"),i()()()(),be()}if(t&2){let s=r.ngIf,e=d();l(4),E(e.pageTitle),l(),S(s&&e.isSuper()?5:-1),l(),p("formGroup",e.f),l(6),ye("is-invalid",e.c.support.dirty&&!e.c.support.valid),l(),S(e.c.support.errors?13:-1),l(7),S(e.isSuper()?20:-1),l(2),p("disabled",e.f.invalid||e.state=="saving"),l(),E(f(24,10,"btns.save")),l(3),g(" ",f(27,12,"btns.cancel")," ")}}function _t(t,r){if(t&1&&(n(0,"pre"),a(1),c(2,"json"),i()),t&2){let s=d();l(),E(f(2,1,s.tenant.tenant()))}}var et=(()=>{let r=class r{constructor(){this.service=u(z),this.tenant=u(oe),this.snackbar=u(P),this.fb=u(R),this.destroyRef=u(M),this.auth=u(Je),this.isAdmin=this.auth.isAdmin,this.isSuper=this.auth.isSuper,this.error=x(void 0),this.loading=x(!1),this.item$=this.service.item$.pipe(q(o=>this.f.reset(o.settings))),this.envName=Z.production?"production":"development",this.dialog=u(Re),k(()=>{this.error()&&this.snackbar.error({title:"\u05E9\u05D2\u05D9\u05D0\u05D4",msg:this.error(),btn:"\u05E1\u05D2\u05D5\u05E8",duration:3e4})});let e=u(we);this.pageTitle=e.snapshot.title||"";let m=w;this.f=this.fb.group({support:[,[m.required,m.pattern(/^\S+@\S{3,}\.\S{2,}$/)]],useTz:[!1]}),this.isAdmin()&&(this.f.addControl("useCreators",this.fb.control(!1)),this.f.addControl("children",this.fb.control(!1))),this.c=this.f.controls}save(){if(this.loading()==!0||this.f.invalid)return;this.loading.set(!0);let e=de({},this.f.value);this.service.save(e).pipe(I(this.destroyRef),Q(m=>(this.loading.set(!1),this.error.set(m.message+"; "+m.subMessage),U))).subscribe({next:m=>{this.loading.set(!1),this.snackbar.success({title:"\u05E9\u05DE\u05D9\u05E8\u05D4",msg:"\u05D4\u05E4\u05E8\u05D9\u05D8 \u05E0\u05E9\u05DE\u05E8 \u05D1\u05D4\u05E6\u05DC\u05D7\u05D4",btn:"\u05E1\u05D2\u05D5\u05E8",duration:1e4})}})}cancel(){this.service.refresh()}openModal(e,m){switch(m){case"bunny":this.dialog.open(Ke,{data:e});break;case"email":this.dialog.open(Xe,{data:e});break}}};r.\u0275fac=function(m){return new(m||r)},r.\u0275cmp=T({type:r,selectors:[["ng-component"]],decls:3,vars:4,consts:[[4,"ngIf"],[1,"card"],[1,"card-header","d-flex","align-items-center"],[1,"my-1"],[1,"ms-auto","d-flex","gap-3"],["novalidate","",3,"ngSubmit","formGroup"],[1,"card-body"],[1,"row"],[1,"col-12","col-lg-6","col-xxl-3","mb-3"],["for","support",1,"form-label"],["type","email","id","support","formControlName","support","autocomplete","off",1,"form-control","ltrr"],[1,"invalid-feedback","d-block"],[1,"form-check","form-switch"],["type","checkbox","id","useTz","formControlName","useTz",1,"form-check-input"],["for","useTz",1,"form-check-label"],[1,"list-group"],[1,"card-footer","d-flex","align-items-center","gap-2"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],["routerLink","../webhooks","role","button",1,"btn","btn-sm","btn-outline-primary"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"list-group-item","list-group-item-danger"],[1,"list-group-item"],["type","checkbox","id","children","formControlName","children",1,"form-check-input"],["for","children",1,"form-check-label"],["type","checkbox","id","useCreators","formControlName","useCreators",1,"form-check-input"],["for","useCreators",1,"form-check-label"]],template:function(m,o){m&1&&(C(0,Et,28,14,"ng-container",0),c(1,"async"),y(2,_t,3,3,"pre")),m&2&&(p("ngIf",f(1,2,o.item$)),l(2),S(o.isAdmin()?2:-1))},dependencies:[Y,Te,G,B,ie,Le,N,A,$,V,F,Ne,J,ke,re,L],encapsulation:2});let t=r;return t})();var Ti=[{path:"tenant",title:"\u05D4\u05D2\u05D3\u05E8\u05D5\u05EA \u05DE\u05E2\u05E8\u05DB\u05EA",component:et},{path:"webhooks",canActivate:[Ye(!1,le.Admin,le.Super)],loadChildren:()=>import("./chunk-Z2QIYUQG.js").then(t=>t.WebhooksModule)}];export{Ti as ADMIN_ROUTES};
