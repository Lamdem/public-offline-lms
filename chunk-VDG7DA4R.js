import{a as b}from"./chunk-2UUWE3MU.js";import{$ as D,Ad as $,Af as U,Ba as R,C as d,Ca as T,Da as E,Ef as X,Gd as H,Ha as O,I,Ic as F,Jc as m,Kc as y,Ld as N,O as f,Rd as z,S as h,Sd as V,U as v,W as s,Xc as P,_a as j,a as l,b as p,ca as B,i as x,k,kb as L,p as C,rc as u,s as _,uf as Y,v as w,x as A,xa as M,y as c}from"./chunk-B4G34RIT.js";function J(o,n){}var G="_mat-bottom-sheet-enter",K="_mat-bottom-sheet-exit",Q=(()=>{class o extends z{_breakpointSubscription;_animationsDisabled=y();_animationState="void";_animationStateChanged=new E;_destroyed;constructor(){super();let i=s(F);this._breakpointSubscription=i.observe([m.Medium,m.Large,m.XLarge]).subscribe(()=>{let t=this._elementRef.nativeElement.classList;t.toggle("mat-bottom-sheet-container-medium",i.isMatched(m.Medium)),t.toggle("mat-bottom-sheet-container-large",i.isMatched(m.Large)),t.toggle("mat-bottom-sheet-container-xlarge",i.isMatched(m.XLarge))})}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._animationsDisabled&&this._simulateAnimation(G))}exit(){this._destroyed||(this._elementRef.nativeElement.setAttribute("mat-exit",""),this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._animationsDisabled&&this._simulateAnimation(K))}ngOnDestroy(){super.ngOnDestroy(),this._breakpointSubscription.unsubscribe(),this._destroyed=!0}_simulateAnimation(i){this._ngZone.run(()=>{this._handleAnimationEvent(!0,i),setTimeout(()=>this._handleAnimationEvent(!1,i))})}_trapFocus(){super._trapFocus({preventScroll:!0})}_handleAnimationEvent(i,t){let e=t===G;(e||t===K)&&this._animationStateChanged.emit({toState:e?"visible":"hidden",phase:i?"start":"done"})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=M({type:o,selectors:[["mat-bottom-sheet-container"]],hostAttrs:["tabindex","-1",1,"mat-bottom-sheet-container"],hostVars:9,hostBindings:function(t,e){t&1&&j("animationstart",function(r){return e._handleAnimationEvent(!0,r.animationName)})("animationend",function(r){return e._handleAnimationEvent(!1,r.animationName)})("animationcancel",function(r){return e._handleAnimationEvent(!1,r.animationName)}),t&2&&(O("role",e._config.role)("aria-modal",e._config.ariaModal)("aria-label",e._config.ariaLabel),L("mat-bottom-sheet-container-animations-enabled",!e._animationsDisabled)("mat-bottom-sheet-container-enter",e._animationState==="visible")("mat-bottom-sheet-container-exit",e._animationState==="hidden"))},features:[R],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){t&1&&T(0,J,0,0,"ng-template",0)},dependencies:[$],styles:[`@keyframes _mat-bottom-sheet-enter{from{transform:translateY(100%)}to{transform:none}}@keyframes _mat-bottom-sheet-exit{from{transform:none}to{transform:translateY(100%)}}.mat-bottom-sheet-container{box-shadow:0px 8px 10px -5px rgba(0, 0, 0, 0.2), 0px 16px 24px 2px rgba(0, 0, 0, 0.14), 0px 6px 30px 5px rgba(0, 0, 0, 0.12);padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto;position:relative;background:var(--mat-bottom-sheet-container-background-color, var(--mat-sys-surface-container-low));color:var(--mat-bottom-sheet-container-text-color, var(--mat-sys-on-surface));font-family:var(--mat-bottom-sheet-container-text-font, var(--mat-sys-body-large-font));font-size:var(--mat-bottom-sheet-container-text-size, var(--mat-sys-body-large-size));line-height:var(--mat-bottom-sheet-container-text-line-height, var(--mat-sys-body-large-line-height));font-weight:var(--mat-bottom-sheet-container-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-bottom-sheet-container-text-tracking, var(--mat-sys-body-large-tracking))}@media(forced-colors: active){.mat-bottom-sheet-container{outline:1px solid}}.mat-bottom-sheet-container-animations-enabled{transform:translateY(100%)}.mat-bottom-sheet-container-animations-enabled.mat-bottom-sheet-container-enter{animation:_mat-bottom-sheet-enter 195ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-bottom-sheet-container-animations-enabled.mat-bottom-sheet-container-exit{animation:_mat-bottom-sheet-exit 375ms cubic-bezier(0.4, 0, 1, 1) backwards}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:var(--mat-bottom-sheet-container-shape, 28px);border-top-right-radius:var(--mat-bottom-sheet-container-shape, 28px)}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}
`],encapsulation:2})}return o})(),tt=new v("MatBottomSheetData"),S=class{viewContainerRef;panelClass;direction;data=null;hasBackdrop=!0;backdropClass;disableClose=!1;ariaLabel=null;ariaModal=!1;closeOnNavigation=!0;autoFocus="first-tabbable";restoreFocus=!0;scrollStrategy;height="";minHeight;maxHeight},g=class{_ref;get instance(){return this._ref.componentInstance}get componentRef(){return this._ref.componentRef}containerInstance;disableClose;_afterOpened=new x;_result;_closeFallbackTimeout;constructor(n,i,t){this._ref=n,this.containerInstance=t,this.disableClose=i.disableClose,t._animationStateChanged.pipe(c(e=>e.phase==="done"&&e.toState==="visible"),d(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(c(e=>e.phase==="done"&&e.toState==="hidden"),d(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._ref.close(this._result)}),n.overlayRef.detachments().subscribe(()=>{this._ref.close(this._result)}),A(this.backdropClick(),this.keydownEvents().pipe(c(e=>e.keyCode===27))).subscribe(e=>{!this.disableClose&&(e.type!=="keydown"||!P(e))&&(e.preventDefault(),this.dismiss())})}dismiss(n){this.containerInstance&&(this.containerInstance._animationStateChanged.pipe(c(i=>i.phase==="start"),d(1)).subscribe(()=>{this._closeFallbackTimeout=setTimeout(()=>this._ref.close(this._result),500),this._ref.overlayRef.detachBackdrop()}),this._result=n,this.containerInstance.exit(),this.containerInstance=null)}afterDismissed(){return this._ref.closed}afterOpened(){return this._afterOpened}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}},et=new v("mat-bottom-sheet-default-options"),xt=(()=>{class o{_injector=s(D);_parentBottomSheet=s(o,{optional:!0,skipSelf:!0});_animationsDisabled=y();_defaultOptions=s(et,{optional:!0});_bottomSheetRefAtThisLevel=null;_dialog=s(V);get _openedBottomSheetRef(){let i=this._parentBottomSheet;return i?i._openedBottomSheetRef:this._bottomSheetRefAtThisLevel}set _openedBottomSheetRef(i){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=i:this._bottomSheetRefAtThisLevel=i}constructor(){}open(i,t){let e=l(l({},this._defaultOptions||new S),t),a;return this._dialog.open(i,p(l({},e),{disableClose:!0,closeOnOverlayDetachments:!1,maxWidth:"100%",container:Q,scrollStrategy:e.scrollStrategy||H(this._injector),positionStrategy:N(this._injector).centerHorizontally().bottom("0"),disableAnimations:this._animationsDisabled,templateContext:()=>({bottomSheetRef:a}),providers:(r,ot,Z)=>(a=new g(r,e,Z),[{provide:g,useValue:a},{provide:tt,useValue:e.data}])})),a.afterDismissed().subscribe(()=>{this._openedBottomSheetRef===a&&(this._openedBottomSheetRef=null)}),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe(()=>a.containerInstance?.enter()),this._openedBottomSheetRef.dismiss()):a.containerInstance.enter(),this._openedBottomSheetRef=a,a}dismiss(i){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(i)}ngOnDestroy(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}static \u0275fac=function(t){return new(t||o)};static \u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var Rt=(()=>{let n=class n{constructor(){this.http=s(u),this.API=`${b.apiUrl}/admin/courses`,this._refresh=B(1),this.refresh_=this._refresh.asReadonly(),this.confirmService=s(X)}refresh(){this._refresh.update(t=>t+1)}getSearch(t,e,a=!1){return this.http.post(`${this.API}/search?withAttached=${a}`,p(l({},t),{paging:e}))}getCourseFull(t){return this.http.get(`${this.API}/${t}/full`)}getItem(t){if(t=="new")return C({id:0,name:"",genderID:3,schoolID:0,statusID:Y.Active});if(isNaN(t))throw"id is not a number | new";return this.http.get(`${this.API}/${t}`).pipe(_(e=>this.parseCourse(e)))}save(t){return this.http.post(this.API,t).pipe(_(e=>this.parseCourse(e)))}delete(t,e){this.confirmService.confirm(()=>this.http.delete(`${this.API}/${t}`).pipe(f(()=>this.refresh())).subscribe(()=>e&&e()))}toggleStatus(t){this.http.post(`${this.API}/${t.id}/toggle-status`,void 0).subscribe(()=>this.refresh())}parseCourse(t){return t.settings=t.settings||{},t}getSelectionList(){return this.http.get(`${this.API}/selection-list`)}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();var it=`${b.apiUrl}/app/tables`,Ht=(()=>{let n=class n{constructor(){this.http=s(u),this.logger=s(U)}getTables(t=["all"]){return this.http.get(`${it}?tables=${t.join(",")}`).pipe(f(()=>this.logger.debug("getting tables: ",t.join(","))),I({connector:()=>new k(1),resetOnComplete:()=>w(30*1e3)}))}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=h({token:n,factory:n.\u0275fac,providedIn:"root"});let o=n;return o})();export{tt as a,g as b,xt as c,Rt as d,Ht as e};
